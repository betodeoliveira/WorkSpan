<script>
    var Webflow = Webflow || [];
    Webflow.push(function () {
        let hasUtms = false;
        // Function to get URL parameters
        function getURLParameters() {
            let params = {};
            let url = window.location.href;
            let paramIndex = url.indexOf('?');

            if (paramIndex !== -1) {
                let queryString = url.substring(paramIndex + 1);
                let pairs = queryString.split('&');

                for (var i = 0; i < pairs.length; i++) {
                    let pair = pairs[i].split('=');
                    let key = decodeURIComponent(pair[0]);
                    let value = decodeURIComponent(pair[1] || '');

                    params[key] = value;
                }
                hasUtms = true;
            }

            return params;
        }
        // Get URL parameters
        let urlParams = getURLParameters();
        // Update the utms and href for each button
        $("[utm-button]").each(function () {
            let newUrl = button.attr("href") + "?";
            // Update the button utms based on the utms from the url
            if(hasUtms) {
                $.each(urlParams, function (key, value) {
                    if($(this).attr(key) !== undefined){
                        $(this).attr(key, value);
                    }
                });
            }
            // Now creates the new url
            newUrl = newUrl + "utm_source=" + $(this).attr("utm_source") + "&" + "utm_campaign=" + $(this).attr("utm_campaign");
            // Update the button href
            $(this).attr("href", newUrl);       
        });
    });
</script>